---
const { frontmatter } = Astro.props;
import Background from "../components/Background.astro";
import Nav from "../components/Nav.astro";
import "@fontsource/istok-web";
import "@fontsource-variable/raleway";
import "@fontsource/fira-mono";

const currentYear = new Date().getFullYear();

// SEO defaults
const defaultTitle =
	"William Livernois - Computational Biophysics & Quantum Transport Research";
const defaultDescription =
	"Postdoctoral Researcher in Electrical and Computer Engineering at University of Washington. Specializing in quantum phenomena in biological systems and computational modeling of charge transport in biomolecules.";
const siteUrl = "https://wliverno.github.io";
const defaultImage = `${siteUrl}/og-image.png`;

// Page-specific meta data
const title = frontmatter.title || defaultTitle;
const description = frontmatter.description || defaultDescription;
const image = frontmatter.image
	? `${siteUrl}${frontmatter.image}`
	: defaultImage;
const url = `${siteUrl}${Astro.url.pathname}`;
---

<!doctype html>
<html lang="en">
	<head>
		<!-- Plausible Analytics -->
		<script
			is:inline
			defer
			data-domain="wliverno.github.io"
			src="https://plausible.io/js/script.file-downloads.hash.outbound-links.js"
		></script>
		<script is:inline>
			window.plausible =
				window.plausible ||
				function () {
					(window.plausible.q = window.plausible.q || []).push(
						arguments,
					);
				};
		</script>

		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />

		<!-- Primary Meta Tags -->
		<title>{title}</title>
		<meta name="title" content={title} />
		<meta name="description" content={description} />
		<meta name="author" content="William Livernois" />
		<meta
			name="keywords"
			content="computational biophysics, quantum transport, biomolecules, DNA electronics, molecular electronics, postdoc researcher, University of Washington"
		/>

		<!-- Canonical URL -->
		<link rel="canonical" href={url} />

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content={url} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={image} />
		<meta property="og:site_name" content="William Livernois" />
		<meta property="og:locale" content="en_US" />

		<!-- Twitter -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:url" content={url} />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content={image} />

		<!-- Additional Meta Tags -->
		<meta
			name="robots"
			content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"
		/>
		<meta name="theme-color" content="#333333" />

		<!-- Structured Data -->
		<script type="application/ld+json">
			{
				"@context": "https://schema.org",
				"@type": "Person",
				"name": "William Livernois",
				"jobTitle": "Postdoctoral Researcher",
				"worksFor": {
					"@type": "Organization",
					"name": "University of Washington",
					"department": "Electrical and Computer Engineering"
				},
				"url": "https://wliverno.github.io",
				"sameAs": [
					"https://linkedin.com/in/willlivernois",
					"https://github.com/wliverno",
					"https://orcid.org/0000-0001-8637-1213"
				],
				"alumniOf": "University of Washington",
				"email": "william@liverno.is",
				"knowsAbout": [
					"Computational Biophysics",
					"Quantum Transport",
					"Molecular Electronics",
					"DNA-based Electronics",
					"Biomolecular Modeling"
				]
			}
		</script>
	</head>
	<body>
		<Nav />
		<Background
			bgImage={frontmatter.bgImage}
			objectPosition={frontmatter.objectPosition}
		/>
		<main>
			{frontmatter.hero && <div id="hero_spacer" />}
			<slot />
		</main>
		<footer class="copyright-footer">
			<p>
				&copy; {currentYear}
				<a
					href="https://rick.works"
					target="_blank"
					rel="noopener noreferrer">rick.works</a>
			</p>
		</footer>
	</body>
</html>

<style>
	html,
	body {
		margin: 0;
		padding: 0;
		width: 100%;
		height: 100%;
		font-family: "Istok Web", sans-serif;
		font-size: 12pt;
		overflow-x: hidden;
		box-sizing: border-box;
	}

	*,
	*::before,
	*::after {
		box-sizing: inherit;
	}

	/* Global heading styles - all headings use Raleway font */
	:global(h1),
	:global(h2),
	:global(h3),
	:global(h4),
	:global(h5),
	:global(h6) {
		font-family: "Raleway Variable", sans-serif;
		font-weight: 600;
	}

	#hero_spacer {
		height: calc(14rem + 16vw);
	}

	@media (max-width: 768px) {
		#hero_spacer {
			height: 25rem;
		}
	}

	main {
		width: 100%;
		max-width: 80rem;
		margin: 5rem auto;
		padding: 1rem 1rem;
		box-sizing: border-box;
		display: flex;
		flex-direction: column;
		flex-grow: 1;
		font-size: 1.5rem;
		overflow-x: hidden;
	}

	@media (max-width: 768px) {
		main {
			margin: 3rem auto 2rem;
			padding: 0 0.75rem;
		}
	}

	@media (max-width: 480px) {
		main {
			margin: 2rem auto 1rem;
			padding: 0 0.5rem;
		}
	}

	.copyright-footer {
		text-align: center;
		padding: 2rem 1rem;
		margin-top: 4rem;
	}

	.copyright-footer p {
		margin: 0;
		font-size: 0.9rem;
		color: #999;
	}

	.copyright-footer a {
		color: #999;
		text-decoration: none;
		font-size: 0.9rem;
		padding: 0;
		margin: 0;
		background: none;
		box-shadow: none;
		border: none;
		border-radius: 0;
		text-shadow: none;
		display: inline;
		transition: color 0.2s ease;
	}

	.copyright-footer a:hover {
		color: #999;
		background: none;
		transform: none;
	}
</style>
